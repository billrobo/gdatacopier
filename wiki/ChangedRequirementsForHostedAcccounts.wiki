#labels Phase-Support
#Due a change in the cookie/authentication requirements for hosted Google accounts.

== Introduction ==

Reported by De Bortoli Wines around the 2nd of January, GDataCopier no longer backs up documents using hosted Google accounts, this is due to a change in the way the URLs calls work for hosted Google accounts. 

Obviously its change thats been introduced by Google to their hosted servers. Normal Google accounts still seem to work but it may be a matter of time before the code is copied across to the public servers.

The following methods were used to figure out what's different with the Google document servers since the original implementation of GDataCopier.

== Wget script to simulate a download ==

{{{
#!/bin/sh

USERNAME="username"
PASSWORD="yourpassword"
DOMAIN="hostedomain.com"
USER_AGENT="Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1.6) Gecko/20061201 Firefox/2.0.0.6 (Ubuntu-feisty)"
COOKIE_FILE="cookies.txt"
DOCUMENT_ID="GetThisFromGoogle"

echo "Trying to login ..."
wget --user-agent "$USER_AGENT" --save-cookies $COOKIE_FILE -c -O login_data.html --post-data "continue=https://docs.google.com/a/$DOMAIN&followup=https://docs.google.com/a/$DOMAIN&userName=$USERNAME&password=$PASSWORD&persistent=true" "https://www.google.com/a/$DOMAIN/LoginAction?service=writely"

echo "Downloading $DOCUMENT_ID ..."
wget --user-agent "$USER_AGENT" --load-cookies $COOKIE_FILE --save-cookies anotherfile.txt -O exported_doc.odf -c "http://docs.google.com/a/$DOMAIN/MiscCommands?command=saveasdoc&exportFormat=oo&docID=$DOCUMENT_ID"
}}}

== Output and analysis of what's different ==

== Can we get around this? ==

Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages